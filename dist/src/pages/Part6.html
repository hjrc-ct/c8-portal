<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Part 4 - Educational Course</title>
    <link rel="stylesheet" href="../styles/main.css">
</head>
<body>
    <main>
        <h2>Deploy sample app</h2>
        <p>
            Lead To Opportunity sample application consists of BPMN, DMN and Form units.
            <br/>
        </p>
        <section>
            <div class="copy-block">
                <p/>
                Shift to toolkit folder and build the custom app JAR.<br/>
                <pre id="copy-text-6-1"><code>
cd toolkit
mvn clean package -DskipTests
IMAGE_NAME=toolkit-$UNAMESPACE
REGISTRY=asia-south2-docker.pkg.dev/c8-labs/c8-labs-repo
docker build -t $REGISTRY/$IMAGE_NAME:v1 .
docker push $REGISTRY/$IMAGE_NAME:v1
cd ..
                </code></pre>
                <p/>
                <button class="copy-btn" onclick="copyToClipboard('copy-text-6-1', 'Make sure Docker Desktop app is running and Maven is accessible.')">Copy</button>
                <p/>
After this, you should see docker image uploaded to GCP artifact registry.
<br/>Check the image in this path: GCP console > Artifact Registry > asia-south2-docker.pkg.dev/c8-labs/c8-labs-repo
            </div>
            <p/>

            <div class="copy-block">
                <p/>
                Deploy the worker tookit JAR.<br/>
                <pre id="copy-text-6-2"><code>
envsubst '${UNAMESPACE}' < deploy-worker-toolkit.yaml  | kubectl apply  -f -
                </code></pre>
                <p/>
                <button class="copy-btn" onclick="copyToClipboard('copy-text-6-2')">Copy</button>
                <p/>
            </div>
            <p/>
           <div class="copy-block">
                <p/>
                Add ingress to enable traffic flow to the deployed services.<br/>
                <pre id="copy-text-5-4"><code>
envsubst '${UNAMESPACE}' < c8-ingress-with-toolkit.yaml           | kubectl apply  -f -
                </code></pre>
                <p/>
                <button class="copy-btn" onclick="copyToClipboard('copy-text-5-4')">Copy</button>
                <p/>
You may check the ingress definition in the assigned namespace.
<br/>
            </div>
            <p/>

        </section>
    </main>
    <script src="../scripts/app.js"></script>
</body>
</html>