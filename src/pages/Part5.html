<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Part 4 - Educational Course</title>
    <link rel="stylesheet" href="../styles/main.css">
</head>
<body>
    <main>
        <h2>Camunda Self-Managed</h2>
        <p>
            Lets install Camunda 8.7.4 components in your assigned namespace.
            <br/>
        </p>
        <section>
            <div class="copy-block">
                <p/>
                Add secret that holds password for various accounts.<br/>
                Default Camunda user account: <code>demo</code><br/>
                Default Keycloak user account: <code>admin</code><p/>
                <pre id="copy-text-5-1"><code>
kubectl apply -f identity-secret.yaml --namespace $UNAMESPACE
                </code></pre>
                <p/>
                <button class="copy-btn" onclick="copyToClipboard('copy-text-5-1')">Copy</button>
                <p/>
After this, you should see secret created in your namespace (via Project Lens UI app).
<br/># Config => secret/identity-secret created
            </div>
            <p/>

            <div class="copy-block">
                <p/>
                Used for TLS and associated configuration.<br/>
                <pre id="copy-text-5-2"><code>
UNAMESPACE=$UNAMESPACE envsubst < zeebe-makefile | sh
                </code></pre>
                <p/>
                <button class="copy-btn" onclick="copyToClipboard('copy-text-5-2', 'Make sure keytool and openssl are installed on your local machine.')">Copy</button>
                <p/>
            </div>
            <p/>

            <div class="copy-block">
                <p/>
                Helm install camunda-platform<br/>
                <pre id="copy-text-5-3"><code>
helm repo add camunda https://helm.camunda.io
helm repo update
UNAMESPACE=$UNAMESPACE envsubst < values-combined-ingress.yaml > values-combined-ingress.my-ns.yaml
UNAMESPACE=$UNAMESPACE envsubst < values-connectors-env.yaml   > values-connectors-env.my-ns.yaml
helm install $UNAMESPACE camunda/camunda-platform \
  -f values-combined-ingress.my-ns.yaml \
  -f values-connectors-env.my-ns.yaml \
  --set zeebe.prometheusServiceMonitor.enabled=true \
  --version 12.4.0 --namespace $UNAMESPACE
                </code></pre>
                <p/>
                <button class="copy-btn" onclick="copyToClipboard('copy-text-5-3', 'This may take a while...')">Copy</button>
                <p/>
This step may take a while as it installs about a handful of pods.
<br/>You may watch the logs associated with pods to see the progress.
            </div>
            <p/>

           <div class="copy-block">
                <p/>
                Add ingress to enable traffic flow to the deployed services.<br/>
                <pre id="copy-text-5-4"><code>
envsubst '${UNAMESPACE}' < c8-ingress-keycloak.yaml  | kubectl apply  -f -
envsubst '${UNAMESPACE}' < c8-ingress.yaml           | kubectl apply  -f -
envsubst '${UNAMESPACE}' < c8-zeebe-ingress.yaml     | kubectl apply  -f -

                </code></pre>
                <p/>
                <button class="copy-btn" onclick="copyToClipboard('copy-text-5-4')">Copy</button>
                <p/>
You may check the ingress definition in the assigned namespace.
<br/>
            </div>
            <p/>

        </section>
    </main>
    <script src="../scripts/app.js"></script>
</body>
</html>